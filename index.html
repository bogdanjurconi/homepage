<!DOCTYPE html>
<html lang="ro" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root[data-theme="light"] {
            --bg-color: #f8f9fa;
            --section-bg: white;
            --text-color: #2c3e50;
            --link-bg: var(--accent-color, #007bff); /* Use accent color with fallback */
            --link-hover: var(--accent-hover, #0056b3);
            --input-bg: white;
            --input-text: #2c3e50;
            --input-border: #ddd;
        }
        
        :root[data-theme="dark"] {
            --bg-color: #1a1a1a;
            --section-bg: #2d2d2d;
            --text-color: #ffffff;
            --link-bg: var(--accent-color, #0056b3);
            --link-hover: var(--accent-hover, #007bff);
            --input-bg: #2d2d2d;
            --input-text: #ffffff;
            --input-border: #444;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            text-align: center;
            background-color: var(--bg-color);
            padding: 50px;
            max-width: 1200px;
            margin: 0 auto;
            color: var(--text-color);
            transition: background-color 0.3s;
        }
        
        .section, .add-link-form {
            background: var(--section-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease; /* Slightly slower and smoother transition */
        }
        
        .section:hover, .add-link-form:hover {
            transform: translateY(-4px); /* Bigger lift effect (was -2px) */
            box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* Stronger shadow */
        }

        h2 {
            color: var(--text-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        h2 i {
            margin-right: 10px; /* Add space between icon and text */
        }

        .links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            max-width: 800px;
            margin: auto;
        }

        a {
            text-decoration: none;
            color: white;
            background-color: var(--link-bg);
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            position: relative;
        }

        .delete-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc3545;
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: none;  /* Hidden by default */
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        a:hover {
            background-color: var(--link-hover);
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .delete-btn:hover {
            background: #c82333;
        }

        @media (max-width: 768px) {
            body {
                padding: 20px;
            }
            
            .links {
                grid-template-columns: 1fr;
            }
        }

        /* Controls */
        .controls {
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--input-border);
            width: 300px;
            font-size: 16px;
            background: var(--input-bg);
            color: var(--input-text);
        }

        .theme-toggle {
            background: var(--link-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .hidden {
            display: none;
        }

        /* Add Link Form Styles */
        .add-link-form {
            background: var(--section-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .add-link-form:hover {
            transform: translateY(-2px);
        }

        .form-group {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .form-group input, .form-group select {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--input-border);
            font-size: 16px;
            background: var(--input-bg);
            color: var(--input-text);
        }

        .add-button {
            background: var(--link-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Add styles for placeholder text */
        .search-box::placeholder,
        .form-group input::placeholder {
            color: var(--input-text);
            opacity: 0.7;
        }

        /* Add these new styles */
        .edit-mode .delete-btn {
            display: flex;  /* Show when in edit mode */
        }

        .edit-toggle {
            background: var(--link-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .edit-toggle.active {
            background: #dc3545;
        }

        @media (hover: none) {
            /* We can remove this media query entirely since we're not using hover anymore */
        }

        /* Replace the color-options styles with these */
        .color-dropdown {
            position: relative;
            display: inline-block;
        }

        .color-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--section-bg);
            border: 1px solid var(--input-border);
            border-radius: 5px;
            padding: 12px;
            margin-top: 8px;
            z-index: 1000;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-width: 200px;
        }

        .color-dropdown.active .color-menu {
            display: block;
        }

        .color-options {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }

        .color-option {
            width: 32px;
            height: 32px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            transition: transform 0.2s;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.active {
            border-color: var(--text-color);
        }

        .custom-color {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-top: 1px solid var(--input-border);
        }

        .custom-color input {
            width: 32px;
            height: 32px;
            padding: 0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            -webkit-appearance: none; /* Remove default border in Safari */
            appearance: none; /* Remove default border in other browsers */
        }

        .custom-color input::-webkit-color-swatch-wrapper {
            padding: 0;
        }

        .custom-color input::-webkit-color-swatch {
            border: none;
            border-radius: 5px;
        }

        .custom-color input::-moz-color-swatch {
            border: none;
            border-radius: 5px;
        }

        .color-button {
            background: var(--link-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            height: 100%;
        }

        /* Add or update these styles */
        .color-button,
        .theme-toggle,
        .edit-toggle {
            font-size: 16px;  /* Make font size consistent */
            padding: 10px 20px;
            height: 41px;     /* Make height consistent */
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Make sure icons are consistent size too */
        .color-button i,
        .theme-toggle i,
        .edit-toggle i {
            font-size: 16px;  /* Make icons same size as text */
        }

        .content {
            display: none; /* Hide content by default */
        }
    </style>
</head>
<body>    
    <div class="content">
        <div class="controls">
            <input type="text" class="search-box" placeholder="Search">
            <div class="color-dropdown">
                <button class="color-button">
                    <i class="fas fa-palette"></i>
                    <span>Colors</span>
                </button>
                <div class="color-menu">
                    <div class="color-options">
                        <button class="color-option" style="background: #007bff" data-color="#007bff" title="Blue"></button>
                        <button class="color-option" style="background: #28a745" data-color="#28a745" title="Green"></button>
                        <button class="color-option" style="background: #dc3545" data-color="#dc3545" title="Red"></button>
                        <button class="color-option" style="background: #6f42c1" data-color="#6f42c1" title="Purple"></button>
                        <button class="color-option" style="background: #fd7e14" data-color="#fd7e14" title="Orange"></button>
                    </div>
                    <div class="custom-color">
                        <input type="color" id="customColor" value="#007bff">
                        <span>Custom Color</span>
                    </div>
                </div>
            </div>
            <button class="theme-toggle">
                <i class="fas fa-sun"></i>
                <span>Theme</span>
            </button>
            <button class="edit-toggle">
                <i class="fas fa-edit"></i>
                <span>Edit</span>
            </button>
        </div>

        <div class="section">
            <h2><i class="fas fa-microchip"></i> Technology</h2>
            <div class="links">
                <a href="https://www.gsmarena.com/" target="_blank">
                    GSM Arena
                    <button class="delete-btn" onclick="removeLink(event)">
                        <i class="fas fa-times"></i>
                    </button>
                </a>
                <a href="https://arstechnica.com/" target="_blank">
                    Ars Technica
                    <button class="delete-btn" onclick="removeLink(event)">
                        <i class="fas fa-times"></i>
                    </button>
                </a>
            </div>
        </div>
        
        <div class="section">
            <h2><i class="fas fa-tv"></i> Sports</h2>
            <div class="links">
                <a href="https://www.atptour.com/" target="_blank">
                    ATP
                    <button class="delete-btn" onclick="removeLink(event)">
                        <i class="fas fa-times"></i>
                    </button>
                </a>
                <a href="https://www.wtatennis.com/" target="_blank">
                    WTA
                    <button class="delete-btn" onclick="removeLink(event)">
                        <i class="fas fa-times"></i>
                    </button>
                </a>
                <a href="https://www.digisport.ro/" target="_blank">
                    Digi Sport
                    <button class="delete-btn" onclick="removeLink(event)">
                        <i class="fas fa-times"></i>
                    </button>
                </a>
            </div>
        </div>
        
        <div class="section">
            <h2><i class="fas fa-newspaper"></i> News</h2>
            <div class="links">
                <a href="https://www.digi24.ro/" target="_blank">
                    Digi 24
                    <button class="delete-btn" onclick="removeLink(event)">
                        <i class="fas fa-times"></i>
                    </button>
                </a>
            </div>
        </div>

        <div class="add-link-form">
            <h2>Add page</h2>
            <div class="form-group">
                <input type="text" id="linkName" placeholder="Name" required>
                <input type="url" id="linkUrl" placeholder="URL" required>
                <select id="linkSection">
                    <option value="Technology">Technology</option>
                    <option value="Sports">Sports</option>
                    <option value="News">News</option>
                </select>
                <button class="add-button" onclick="addNewLink()">Add Link</button>
            </div>
        </div>
    </div>

    <script>
        // Dark mode toggle
        const themeToggle = document.querySelector('.theme-toggle');
        themeToggle.addEventListener('click', () => {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            
            // Update icon
            const icon = themeToggle.querySelector('i');
            icon.className = newTheme === 'light' ? 'fas fa-sun' : 'fas fa-moon';
            
            // Save theme preference
            localStorage.setItem('theme', newTheme);
        });

        // Search functionality
        const searchBox = document.querySelector('.search-box');
        searchBox.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const sections = document.querySelectorAll('.section');
            
            sections.forEach(section => {
                const links = section.querySelectorAll('.links a');
                let visibleLinks = 0;
                
                links.forEach(link => {
                    const text = link.textContent.toLowerCase();
                    if (text.includes(searchTerm)) {
                        link.classList.remove('hidden');
                        visibleLinks++;
                    } else {
                        link.classList.add('hidden');
                    }
                });
                
                // Hide/show section based on whether it has visible links
                if (visibleLinks === 0) {
                    section.classList.add('hidden');
                } else {
                    section.classList.remove('hidden');
                }
            });
        });

        // Function to save links to localStorage
        function saveLinks() {
            const sections = document.querySelectorAll('.section');
            const data = {};
            
            sections.forEach(section => {
                const sectionName = section.querySelector('h2').textContent;
                const links = section.querySelectorAll('.links a');
                data[sectionName] = Array.from(links).map(link => ({
                    name: link.textContent.trim(),
                    url: link.href
                }));
            });
            
            localStorage.setItem('savedLinks', JSON.stringify(data));
        }

        // Function to load links from localStorage
        function loadLinks() {
            const savedData = localStorage.getItem('savedLinks');
            if (!savedData) return;
            
            const data = JSON.parse(savedData);
            
            Object.entries(data).forEach(([sectionName, links]) => {
                const section = Array.from(document.querySelectorAll('.section'))
                    .find(sec => sec.querySelector('h2').textContent.includes(sectionName));
                
                if (section) {
                    const linksDiv = section.querySelector('.links');
                    linksDiv.innerHTML = ''; // Clear existing links
                    
                    links.forEach(link => {
                        const newLink = document.createElement('a');
                        newLink.href = link.url;
                        newLink.target = '_blank';
                        newLink.innerHTML = `
                            ${link.name}
                            <button class="delete-btn" onclick="removeLink(event)">
                                <i class="fas fa-times"></i>
                            </button>
                        `;
                        linksDiv.appendChild(newLink);
                    });
                }
            });
        }

        // Modify addNewLink function to save after adding
        function addNewLink() {
            const name = document.getElementById('linkName').value;
            const url = document.getElementById('linkUrl').value;
            const section = document.getElementById('linkSection').value;

            if (!name || !url) {
                alert('Please fill in both name and URL');
                return;
            }

            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                alert('Please enter a valid URL starting with http:// or https://');
                return;
            }

            const sectionDiv = Array.from(document.querySelectorAll('.section'))
                .find(sec => sec.querySelector('h2').textContent.includes(section));

            if (sectionDiv) {
                const linksDiv = sectionDiv.querySelector('.links');
                const newLink = document.createElement('a');
                newLink.href = url;
                newLink.target = '_blank';
                newLink.innerHTML = `
                    ${name}
                    <button class="delete-btn" onclick="removeLink(event)">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                linksDiv.appendChild(newLink);

                // Clear the form
                document.getElementById('linkName').value = '';
                document.getElementById('linkUrl').value = '';
                
                // Save to localStorage
                saveLinks();
            }
        }

        // Modify removeLink function to save after removing
        function removeLink(event) {
            event.preventDefault();
            event.stopPropagation();
            if (confirm('Are you sure you want to remove this link?')) {
                event.target.closest('a').remove();
                saveLinks();
            }
        }

        // Load saved links when the page loads
        window.addEventListener('load', loadLinks);

        // Load theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.documentElement.setAttribute('data-theme', savedTheme);
            const icon = themeToggle.querySelector('i');
            icon.className = savedTheme === 'light' ? 'fas fa-sun' : 'fas fa-moon';
        }

        // Add this new code
        const editToggle = document.querySelector('.edit-toggle');
        const body = document.body;

        editToggle.addEventListener('click', () => {
            body.classList.toggle('edit-mode');
            editToggle.classList.toggle('active');
            
            // Update button text and icon
            const span = editToggle.querySelector('span');
            const icon = editToggle.querySelector('i');
            if (body.classList.contains('edit-mode')) {
                span.textContent = 'Done';
                icon.className = 'fas fa-check';
                editToggle.style.background = '#28a745';
            } else {
                span.textContent = 'Edit';
                icon.className = 'fas fa-edit';
                editToggle.style.background = 'var(--link-bg)';
            }
        });

        // Save edit mode state to localStorage
        function saveEditMode() {
            localStorage.setItem('editMode', body.classList.contains('edit-mode'));
        }

        // Load edit mode state
        const savedEditMode = localStorage.getItem('editMode');
        if (savedEditMode === 'true') {
            body.classList.add('edit-mode');
            editToggle.classList.add('active');
            editToggle.querySelector('span').textContent = 'Done';
            editToggle.querySelector('i').className = 'fas fa-check';
            editToggle.style.background = '#28a745';
        }

        // Add edit mode state to storage when changed
        editToggle.addEventListener('click', saveEditMode);

        // Update the color dropdown JavaScript
        const colorDropdown = document.querySelector('.color-dropdown');
        const colorButton = colorDropdown.querySelector('.color-button');
        const colorOptions = document.querySelectorAll('.color-option');
        const customColorPicker = document.querySelector('#customColor');
        const root = document.documentElement;

        // Toggle dropdown
        colorButton.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent event from bubbling up
            colorDropdown.classList.toggle('active');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!colorDropdown.contains(e.target)) {
                colorDropdown.classList.remove('active');
            }
        });

        // Prevent closing when clicking inside the menu
        document.querySelector('.color-menu').addEventListener('click', (e) => {
            e.stopPropagation();
        });

        function updateAccentColor(color) {
            root.style.setProperty('--accent-color', color);
            const darkerColor = color + "dd";
            root.style.setProperty('--accent-hover', darkerColor);
            localStorage.setItem('accentColor', color);
            
            // Update active state
            colorOptions.forEach(option => {
                option.classList.toggle('active', option.dataset.color === color);
            });
            
            // Update custom color picker value
            customColorPicker.value = color;
        }

        // Add custom color picker event listener
        customColorPicker.addEventListener('input', (e) => {
            updateAccentColor(e.target.value);
        });

        colorOptions.forEach(option => {
            option.addEventListener('click', () => {
                updateAccentColor(option.dataset.color);
            });
        });

        // Load saved accent color
        const savedColor = localStorage.getItem('accentColor');
        if (savedColor) {
            updateAccentColor(savedColor);
        } else {
            updateAccentColor('#007bff'); // Default color
        }

        window.onload = function() {
            const correctCode = "5134"; // Change this to your desired code
            const content = document.querySelector('.content');
            const hasAccess = localStorage.getItem('hasAccess');
            
            function checkCode() {
                let userInput = prompt("Please enter access code:");
                
                if (userInput === correctCode) {
                    content.style.display = 'block';
                    localStorage.setItem('hasAccess', 'true'); // Save that access was granted
                } else if (userInput === null) {
                    // User clicked Cancel
                    document.body.innerHTML = "Access denied";
                } else {
                    checkCode(); // Ask again
                }
            }
            
            // Only check code if access hasn't been granted before
            if (!hasAccess) {
                checkCode();
            } else {
                content.style.display = 'block'; // Show content if access was previously granted
            }
        };
    </script>
</body>
</html>
